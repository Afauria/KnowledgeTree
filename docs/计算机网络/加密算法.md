# 对称加密和非对称加密

* 对称加密：通信双方使用一个密钥进行加密和解密，运算速度快，但是无法保证安全地交换密钥。
* 非对称加密：通信双方分别使用公钥（public key）和私钥（private key），公钥可以公开，私钥保密。用其中一个进行加密，只能用另一个进行解密。

## 加密和解密、签名和认证

**在加密的场景下，公钥用来加密，私钥用来解密**

Bob用Alice的公钥对消息进行加密，并把加密之后的消息传回给Alice；Alice应该保存好与这个公钥相对应的私钥，当Alice收到Bob发来的加密过的消息后，通过手里的私钥对其进行解密。

只有私钥可以解密，而公钥不可以，所以即使公钥被窃听者Eve知道也没有关系。

**在签名的场景下，私钥用来加密，公钥用来解密**

由于公钥可以被多方持有，而私钥只有一方拥有，因此私钥可以用于签名，使用公钥验证来源是否正确，用私钥进行加密，用公钥进行解密。目的是保证内容是Alice发出的

因为私钥只有Alice自己知道，所以用私钥对消息进行签名后，只有与之对应的公钥才能对这个签过名的消息进行认证，而公钥是公开的，通过这个过程可以知道该消息确实是属于Alice的。

示例：

1. 使用ssh登录GitHub仓库，本地持有私钥，GitHub服务器保存公钥。本地使用私钥进行加密发送给服务器，服务器进行解密并验证数据来源正确。
2. CA使用私钥签名证书，客户端使用公钥验证

# Diffie-Hellman（迪菲-赫尔曼）密钥交换算法

密钥交换算法不是加密方法，而是用于安全的交换密钥

1. Alice与Bob确定两个大素数n和g，这两个数不用保密
2. Alice选择另一个大随机数x（需要保密），并计算A如下：A=g^x mod n（不需要保密）
3. Alice将A发给Bob
4. Bob  选择另一个大随机数y（需要保密），并计算B如下：B=g^y mod n（不需要保密）
5. Bob将B发给Alice
6. Alice收到B之后，计算密钥K1如下：K1=B^x mod n
7. Bob收到A之后，计算密钥K2如下：K2=A^y mod n
8. 此时K1=K2，因此Alice和Bob可以用其进行加解密。
8. 由于中间人无法知道x、y，因此无法计算得到密钥

> 素数（质数）：除了1和它本身之外不再有其他因数

# RSA加密算法

rsa加密算法是基于这样的数学事实：两个大素数（质数）相乘容易，而对得到的乘积求因子则很难。加密过程如下：

1. 选择两个大素数P、Q
2. 计算N=P*Q
3. 选择一个公钥（加密密钥）E，使其不是(P-1)与(Q-1)的因子
4. 选择私钥（解密密钥）D，满足条件：`(D*E) mod (P-1)(Q-1)=1`
5. 加密时，明文PT计算密文CT：`CT=PTE mod N`
6. 解密时，从密文CT计算明文PT：PT=CTD mod N 这也是SSL中会用一种密钥交换算法。

# 结语

参考资料：

* [知乎：RSA的公钥和私钥到底哪个才是用来加密和哪个用来解密？](https://www.zhihu.com/question/25912483)

